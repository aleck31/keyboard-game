<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>键盘打字竞速游戏</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <!-- 样式文件 -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/vue-components.css">
    <link rel="stylesheet" href="css/defense-mode.css">
    <link rel="stylesheet" href="css/racing-mode.css">
    <link rel="stylesheet" href="css/mode-indicator.css">
    <!-- Vue.js 3 CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body class="theme-dark">
    <!-- Main Container -->
    <div class="game-container">
        <!-- Header -->
        <header class="game-header">
            <h1 class="game-title">🎮 键盘打字竞速游戏</h1>

            <!-- 设置面板 -->
            <div class="header-controls">
                <button class="btn btn-icon" id="themeToggle" title="切换主题">
                    🌙
                </button>
                <button class="btn btn-icon" id="settingsBtn" title="设置">
                    ⚙️
                </button>
                <button class="btn btn-icon" id="audioToggle" title="音频开关">
                    🔊
                </button>
            </div>
        </header>

        <!-- Vue App Container -->
        <div id="vue-app">
            <!-- Vue组件将在这里渲染，包括所有游戏功能 -->
            <!-- 核心游戏界面已经仅在vue-app.js中定义，包括：
                - 游戏模式选择
                - 统计面板
                - 游戏区域
                - 文本显示区域
                - 输入区域
                - 游戏控制按钮
            -->
        </div>

        <!-- 结果面板/模态框 -->
        <div></div>

        <!-- Footer -->
        <footer class="game-footer">
            <p>&copy; 2025 键盘打字竞速游戏</p>
        </footer>
    </div>

    <!-- 设置模态框 -->
    <div class="modal hidden" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>⚙️ 游戏设置</h3>
                <button class="modal-close" id="closeSettings">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 基础模式设置 -->
                <div class="setting-section">
                    <h4>🎯 基础模式设置</h4>
                    <p class="setting-desc">适用于经典模式、单词模式</p>
                    
                    <div class="setting-group">
                        <label for="difficultySelect">游戏难度:</label>
                        <select id="difficultySelect">
                            <option value="easy">🟢 简单 - 较短文本</option>
                            <option value="normal" selected>🟡 普通 - 标准难度</option>
                            <option value="hard">🔴 困难 - 较长文本</option>
                            <option value="expert">🟣 专家 - 挑战你的极限</option>
                        </select>
                    </div>
                    
                    <div class="setting-group">
                        <label for="timeLimitSelect">时间限制 (秒):</label>
                        <select id="timeLimitSelect">
                            <option value="30">30秒</option>
                            <option value="60" selected>60秒</option>
                            <option value="120">120秒</option>
                            <option value="300">300秒</option>
                        </select>
                    </div>
                </div>
                
                <!-- 音频设置 -->
                <div class="setting-section">
                    <h4>🔊 音频设置</h4>
                    
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="enableSounds" checked>
                            🎵 启用音效
                        </label>
                        <label>
                            <input type="checkbox" id="enableMusic" checked>
                            🎶 启用背景音乐
                        </label>
                    </div>
                </div>
                
                <!-- 界面设置 -->
                <div class="setting-section">
                    <h4>🎨 界面设置</h4>
                    
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="highlightErrors" checked>
                            ❌ 高亮错误
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="resetSettings">🔄 重置默认</button>
                <button class="btn btn-primary" id="saveSettings">💾 保存设置</button>
            </div>
        </div>
    </div>

    <!-- 排行榜模态框 -->
    <div class="modal hidden" id="leaderboardModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>排行榜</h3>
                <button class="modal-close" id="closeLeaderboard">&times;</button>
            </div>
            <div class="modal-body">
                <div class="leaderboard-list" id="leaderboardList">
                    <!-- 排行榜内容将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript文件 -->
    <script src="js/utils.js"></script>
    
    <!-- 优化模块 (高优先级) -->
    <script src="js/utils/error-handler.js"></script>
    <script src="js/utils/performance-monitor.js"></script>
    <script src="js/stores/game-store.js"></script>
    
    <!-- 核心模块 -->
    <script src="js/api-client.js"></script>
    <script src="js/audio-manager.js"></script>
    <script src="js/stats-manager.js"></script>
    <script src="js/ui-manager.js"></script>
    <script src="js/game-engine.js"></script>
    <script src="js/defense-engine.js"></script>
    
    <!-- Vue组件 -->
    <script src="js/components/game-controls.js"></script>
    <script src="js/components/game-stats.js"></script>
    <script src="js/components/racing-track.js"></script>
    <script src="js/components/defense-game.js"></script>
    <script src="js/components/app-utils.js"></script>
    
    <!-- Vue应用 -->
    <script src="js/vue-app.js"></script>
    
    <!-- 主应用 -->
    <script src="js/main.js"></script>
</body>
</html>
